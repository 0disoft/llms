# [배포 대상] 배포 가이드

* **배포 대상**: [프론트엔드 | 백엔드 | 데이터베이스 스키마 등]
* **주요 배포 환경**: [프로덕션 서버 | 스테이징 서버 등]
* **배포 자동화 도구**: [GitHub Actions | Jenkins | CircleCI | Dagger 등]

---

## 1. 개요 (Overview)

이 문서는 [배포 대상]의 빌드, 테스트, 그리고 배포 과정을 안내합니다. 이 파이프라인의 목표는 안정적이고 예측 가능한 방식으로 새로운 버전의 코드를 서버에 배포하는 것입니다.

## 2. 필수 환경 변수 (Required Environment Variables)

배포 스크립트가 올바르게 작동하기 위해 CI/CD 환경에 반드시 설정되어야 하는 환경 변수 목록입니다. (비밀 키 등은 GitHub Secrets와 같은 보안 저장소를 통해 관리됩니다.)

| 변수명 | 설명 | 민감 정보 여부 |
|---|---|---|
| `DATABASE_URL` | 애플리케이션이 연결할 데이터베이스의 주소 | 예 |
| `API_BASE_URL` | 클라이언트가 호출할 API 서버의 기본 주소 | 아니오 |
| `SERVICE_API_KEY`| 다른 외부 서비스와 통신 시 사용하는 API 키 | 예 |

## 3. 배포 파이프라인 단계 (Deployment Pipeline)

### 3.1. 브랜치 전략

* `main` 브랜치에 코드가 푸시(push)되면 **프로덕션 환경**으로 자동 배포가 시작됩니다.
* `develop` 브랜치에 코드가 푸시(push)되면 **스테이징 환경**으로 자동 배포가 시작됩니다.

### 3.2. 실행 과정

1. **의존성 설치 (Install Dependencies)**
    * 명령어: `pnpm install --frozen-lockfile`
    * 설명: `pnpm-lock.yaml` 파일을 기반으로 정확한 버전의 의존성을 설치합니다.

2. **코드 품질 검사 (Lint & Format Check)**
    * 명령어: `pnpm lint`
    * 설명: 코딩 컨벤션과 스타일 가이드 준수 여부를 검사합니다.

3. **빌드 (Build)**
    * 명령어: `pnpm build`
    * 설명: 프로덕션 환경에서 실행될 최적화된 정적 파일을 생성합니다.

4. **테스트 (Test)**
    * 명령어: `pnpm test`
    * 설명: 모든 단위 테스트와 통합 테스트를 실행합니다. 모든 테스트를 통과해야 다음 단계로 진행됩니다.

5. **데이터베이스 마이그레이션 (Database Migration)**
    * 명령어: `pnpm db:migrate`
    * 설명: 새로운 코드에 필요한 데이터베이스 스키마 변경을 적용합니다. (필요 시)

6. **배포 (Deploy)**
    * 명령어: [사용하는 배포 서비스의 CLI 명령어 또는 스크립트를 기입합니다. 예: `vercel deploy --prod`]
    * 설명: 빌드된 결과물을 실제 서버에 배포합니다.

7. **배포 후 검증 (Post-Deployment Verification)**
    * 명령어: `pnpm test:smoke`
    * 설명: 배포된 서비스의 핵심 기능이 정상적으로 동작하는지 간단한 E2E 테스트(스모크 테스트)를 실행합니다.

## 4. 롤백 계획 (Rollback Plan)

배포 후 심각한 문제가 발견될 경우, [사용하는 배포 서비스]의 대시보드에서 이전 버전의 배포를 선택하여 '즉시 롤백(Instant Rollback)' 기능을 사용합니다.
