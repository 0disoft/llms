# pnpm 2025년 2분기 주요 업데이트 분석

## 서론

본 보고서는 2025년 2분기(3월 1일부터 6월 30일까지) 릴리즈된 pnpm 패키지 관리자의 주요 변경사항과 패치 노트를 종합적으로 분석하여 제공합니다. 특히, 개발자가 코드를 작성하고 애플리케이션을 운영할 때 반드시 인지하고 적용해야 할 핵심적인 변경사항에 초점을 맞춥니다.

이 보고서는 pnpm을 사용하여 JavaScript/TypeScript 프로젝트를 개발하고 관리하는 개발자를 대상으로 합니다.

### 2025년 2분기 pnpm 주요 변경사항 요약

2025년 2분기(3월~6월)에 릴리즈된 pnpm 버전들은 pnpm 10.8부터 10.12.4까지 다양하게 분포하며, 성능, 기능, 안정성 측면에서 상당한 발전을 이루었습니다.

핵심 변경사항 개요
가장 주목할 만한 변화는 다음과 같습니다.

* 성능 혁신: 글로벌 가상 스토어 도입 (실험적 기능): pnpm 10.12.1에서 실험적으로 도입된 이 기능은 캐시가 "따뜻한" 개발 환경에서 설치 속도를 획기적으로 개선합니다.
* 의존성 관리의 진화: 버전 카탈로그 시스템 강화: 모노레포 환경에서 의존성 버전을 일관되게 관리하는 데 필수적인 버전 카탈로그 시스템이 대폭 개선되었습니다.
* 보안 및 제어 강화: JSR 패키지 지원 및 `dangerouslyAllowAllBuilds`: pnpm 10.9에서는 JSR(JavaScript Registry) 패키지 설치를 공식적으로 지원하기 시작했으며, `dangerouslyAllowAllBuilds` 설정이 추가되어 의존성 스크립트 실행에 대한 개발자의 제어권을 강화했습니다.
* 안정성 및 개발자 경험 개선: 다양한 버그 수정, 워크스페이스 관련 기능 개선, CLI 사용성 향상 등 전반적인 안정성과 개발자 경험을 향상시키는 패치들이 지속적으로 이루어졌습니다.

2025년 2분기 pnpm 주요 릴리즈 요약

| 릴리즈 버전 | 릴리즈 날짜 | 주요 변경사항 (High-level Summary) | 개발자 중요도 |
|---|---|---|---|
| pnpm 10.12.4 | 2025년 6월 26일 | 로컬 의존성, `pnpm ls --json` 버그 수정, 피어 의존성 해결 데드락 수정, v10.12.2에서 도입된 호이스팅 회귀 수정. | Medium |
| pnpm 10.12.3 | 2025년 6월 24일 | 오래된 록파일 사용 시 선택적 피어 의존성 호이스팅 복원 (v10.12.2 회귀 수정). | High |
| pnpm 10.12.2 | 2025년 6월 23일 | `enableGlobalVirtualStore` 호이스팅, `pnpm create --help` 플래그, `pnpm licenses list --json` 출력, `pnpm deploy` 오류 수정. | Medium |
| pnpm 10.12.1 | 2025년 6월 08일 | 글로벌 가상 스토어 (실험적) 도입, 버전 카탈로그 시스템 대폭 개선, 사이드 이펙트 캐시 키 변경 (Semi-breaking), ci 설정 추가. | Critical |
| pnpm 10.11.1 | 2025년 6월 02일 | `pnpm deploy --legacy` 및 URL 리다이렉션 문제, `strictPeerDependencies`, `pnpm update --lockfile-only` 회귀 등 안정성 관련 다수 버그 수정. | High |
| pnpm 10.11 | 2025년 5월 13일 | `pnpm init type=module` 지원, Nushell 지원, `pnpm audit --ignore` 플래그, `pnpm -r pack` 지원. | Medium |
| pnpm 10.10 | 2025년 4월 27일 | 로컬 `pnpmfile`에서 `preResolution`, `importPackage`, `fetchers` 훅 로딩 지원. `cd` 명령, `pnpm-workspace.yaml` 정렬 등 패치. | Medium |
| pnpm 10.9 | 2025년 4월 21일 | JSR 패키지 설치 지원, `dangerouslyAllowAllBuilds` 설정 추가. `verifyDepsBeforeRun` 관련 수정. | High |
| pnpm 10.8.1 | 2025년 4월 14일 | 밝은 테마 하이라이팅, `onlyBuiltDependencies` 작성 위치, 패치 파일 경로 관련 패치. | Low |
| pnpm 10.8 | 2025년 4월 07일 | `.pnpmfile.cjs`를 통한 설정 업데이트 훅 (실험적), `pnpm add --config` 플래그 추가. `pnpm-workspace.yaml` `glob`, `pnpm audit --fix` 수정. | Medium |

### pnpm의 진화 방향

2025년 2분기 릴리즈는 pnpm이 대규모 모노레포 및 대규모 프로젝트 환경에서 독보적인 위치를 확고히 하려는 전략적 움직임을 보여줍니다. 글로벌 가상 스토어는 대규모 의존성을 빠르게 처리하고, 버전 카탈로그는 복잡한 모노레포에서 의존성 충돌을 줄이며, JSR 지원은 다양한 소스의 패키지를 통합하여 개발 유연성을 높입니다.

---

## 세부 변경사항 분석: 개발자가 반드시 알아야 할 내용

이 섹션에서는 2025년 2분기에 릴리즈된 pnpm의 각 주요 버전별 변경사항을 심층적으로 분석하고, 개발자가 코딩 및 프로젝트 운영에 있어 반드시 인지하고 적용해야 할 사항들을 제시합니다.

### pnpm 10.12.x 시리즈 (2025년 6월 릴리즈)

이 시리즈는 특히 pnpm 10.12.1에서 혁신적인 기능들이 대거 도입되었으며, 이후 버전들은 해당 기능들의 안정화 및 버그 수정에 집중했습니다.

* 글로벌 가상 스토어 도입 (실험적 기능): `pnpm 10.12.1`에서 `enableGlobalVirtualStore: true` 설정을 통해 실험적으로 도입된 이 기능은 캐시가 "따뜻할 때의 설치 속도"라는 특정 시나리오에 대한 극대화된 최적화를 시도합니다. 이는 Node.js의 `node_modules` 내부 구조를 변경하여 의존성 인스턴스를 프로젝트 간에 재사용할 수 있도록 합니다.
  * 개발자에게 미치는 영향은 로컬 개발 머신에서 `pnpm install` 실행 시 거의 즉각적인 설치 경험을 제공하여 개발 생산성을 크게 향상시킵니다. `node_modules`의 내부 구조가 변경되므로, `node_modules` 내부를 직접 탐색하거나 특정 경로에 의존하는 스크립트가 있다면 주의가 필요합니다.
  * 권장 조치로는 로컬 개발 환경에서 `pnpm config -g set enable-global-virtual-store true` 또는 루트 `pnpm-workspace.yaml`에 `enableGlobalVirtualStore: true`를 추가하여 이 실험적 기능을 활성화하고 성능 개선을 체감해 보는 것입니다.
* 버전 카탈로그 시스템 개선: `pnpm 10.12.1`에서 버전 카탈로그 시스템이 대폭 강화되었습니다. "카탈로그"는 워크스페이스 기능으로, 의존성 버전 범위를 재사용 가능한 상수로 정의합니다.
  * `pnpm update` 명령이 이제 `catalog:` 프로토콜로 정의된 의존성을 업데이트하고, `pnpm-workspace.yaml`에 새로운 명세자를 기록합니다.
  * 새로운 `catalogMode` 설정 (`strict`, `prefer`, `manual` - 기본값)이 추가되어, 의존성이 기본 카탈로그에 추가되는 방식을 제어할 수 있습니다.
  * `pnpm add` 명령에 `--save-catalog` 및 `--save-catalog-name=<name>` 두 가지 새로운 CLI 옵션이 추가되어, 새 의존성을 카탈로그 항목으로 저장할 수 있습니다.
  * 권장 조치로는 모노레포를 운영 중이거나 대규모 프로젝트에서 의존성 일관성 유지가 어려운 경우, 버전 카탈로그 시스템을 적극적으로 도입하고 `catalogMode` 설정을 프로젝트의 필요에 맞게 조정하는 것입니다.
* 사이드 이펙트 캐시 키 변경 (Semi-breaking): `pnpm 10.12.1`에서 사이드 이펙트 캐시(side-effects cache)에 사용되는 키가 변경되었습니다. 이로 인해 이전 버전에서 생성된 캐시는 더 이상 사용되지 않고, 새 버전에서 다시 캐시를 생성해야 합니다.
  * 개발자에게 미치는 영향은 첫 설치 시 캐시가 다시 생성되므로, 일시적으로 설치 시간이 길어질 수 있다는 점입니다.
  * 권장 조치로는 업그레이드 후 첫 `pnpm install` 시 설치 시간이 길어질 수 있음을 인지하고, 필요하다면 캐시를 미리 삭제하여 깨끗한 상태에서 시작하는 것을 고려해 보는 것입니다.
* `ci` 설정 추가: `pnpm 10.12.1`에서 현재 환경이 CI(Continuous Integration) 환경인지 여부를 pnpm에 명시적으로 알릴 수 있는 새로운 `ci` 설정이 추가되었습니다. 이 설정은 pnpm이 CI 환경에서 특정 최적화(예: 글로벌 가상 스토어 비활성화)를 더 정확하게 적용할 수 있도록 돕습니다.
  * 권장 조치로는 CI/CD 스크립트에서 pnpm 명령을 실행할 때, 필요에 따라 이 `ci` 설정을 명시적으로 지정하는 것을 고려해 보는 것입니다.

### pnpm 10.11.x 시리즈 (2025년 5월-6월 릴리즈)

pnpm 10.11.x 시리즈는 주로 안정성 개선과 개발자 편의성 향상에 중점을 둔 업데이트를 포함합니다.

* `pnpm 10.11.1` 패치 변경사항: 여러 중요한 버그 수정과 회귀 복구를 포함하여 전반적인 안정성을 크게 향상시켰습니다.
* `pnpm 10.11` 마이너 변경사항:
  * `pnpm init` 명령에 `init-type`이 `module`일 때 `package.json`에 `type=module`을 생성하는 새로운 설정이 추가되었습니다.
  * `pnpm setup`에 Nushell 지원이 추가되었습니다.
  * `pnpm audit` 명령에 `--ignore` 및 `--ignore-unfixable` 두 가지 새로운 플래그가 추가되었습니다.
  * 워크스페이스의 모든 프로젝트에서 재귀적으로 `pack`을 실행하는 기능(`pnpm -r pack`)이 추가되었습니다.

### pnpm 10.10 (2025년 4월 릴리즈)

pnpm 10.10은 `pnpmfile`을 통한 훅 로딩 기능 강화와 여러 안정성 패치를 포함합니다.

* 마이너 변경사항: `preResolution`, `importPackage`, `fetchers` 훅을 로컬 `.pnpmfile.cjs`에서 로드할 수 있도록 허용되었습니다.
* 패치 변경사항:
  * `shellEmulator`가 `true`일 때 `cd` 명령이 작동하지 않던 문제가 수정되었습니다.
  * `pnpm-workspace.yaml` 파일 내 키들이 정렬되도록 변경되어, 파일의 가독성과 버전 관리 용이성이 향상되었습니다.
  * 실행되는 스크립트에 `npm_package_json` 환경 변수가 전달되도록 수정되었습니다.

### pnpm 10.9 (2025년 4월 릴리즈)

pnpm 10.9는 새로운 패키지 레지스트리 지원과 보안 관련 중요한 설정을 도입했습니다.

* JSR 패키지 설치 지원: `pnpm 10.9`의 가장 중요한 마이너 변경사항 중 하나는 JSR(JavaScript Registry) 패키지 설치 지원입니다. 이제 `pnpm add jsr:<pkg_name>` 또는 `pnpm add jsr:<pkg_name>@<range>` 명령을 사용하여 JSR 패키지를 설치할 수 있습니다.
* `dangerouslyAllowAllBuilds` 설정 추가: 새로운 설정인 `dangerouslyAllowAllBuilds`가 추가되었습니다. 이 설정은 의존성의 모든 스크립트를 승인 없이 자동으로 실행할 수 있도록 허용합니다. 이 설정은 편의성과 보안 사이의 중요한 균형점을 제시하며, 잠재적인 보안 위험을 내포하므로 사용에 각별한 주의가 필요합니다.
* 패치 변경사항:
  * `nodeLinker`가 `hoisted`이고 의존성이 없는 워크스페이스 패키지에 `node_modules` 디렉토리가 없을 때 `verifyDepsBeforeRun`에서 발생하던 오탐(false negative)이 수정되었습니다.
  * `nodeLinker: pnp`와 `verifyDepsBeforeRun`을 함께 사용하는 것에 대한 지원이 명시적으로 중단되었으며, 이제 이 조합을 사용하면 경고 메시지가 출력됩니다.

### pnpm 10.8.x 시리즈 (2025년 4월 릴리즈)

pnpm 10.8.x 시리즈는 설정 관리의 유연성을 높이고 버그를 수정하는 데 중점을 두었습니다.

* `pnpm 10.8.1` 패치 변경사항:
  * 일부 밝은 테마에서 보기 좋지 않던 밝은 흰색 하이라이팅이 제거되었습니다.
  * `package.json`에 pnpm 관련 설정이 없을 경우, `onlyBuiltDependencies` 설정이 `pnpm-workspace.yaml` 파일에 작성되도록 변경되었습니다.
  * `pnpm patch-commit` 및 `pnpm patch-remove` 명령으로 저장되는 패치 파일 경로가 상대 경로가 되도록 수정되었습니다.
* `pnpm 10.8` 마이너 변경사항:
  * `.pnpmfile.cjs`를 통해 설정 값을 업데이트할 수 있는 새로운 훅이 실험적으로 지원됩니다.
  * `pnpm add` 명령에 `--config` 플래그가 추가되어, 새로운 설정 의존성을 설치할 수 있게 되었습니다.
* 패치 변경사항:
  * `pnpm-workspace.yaml`에 `!/`로 시작하는 `glob`이 있을 때 무한히 멈추던 문제가 수정되었습니다.
  * `pnpm audit --fix` 명령이 `pnpm-workspace.yaml`의 `overrides`를 업데이트하도록 수정되었습니다.
  * `pnpm link` 명령이 `package.json`이 아닌 `pnpm-workspace.yaml`의 `overrides`를 업데이트하도록 수정되었습니다.

---

## 결론 및 권장사항

2025년 2분기 동안 pnpm은 성능, 의존성 관리, 개발자 경험 측면에서 상당한 발전을 이루었습니다. 특히 pnpm 10.12.1에서 도입된 글로벌 가상 스토어와 버전 카탈로그 시스템의 대폭 개선은 pnpm이 모노레포 및 대규모 프로젝트 환경에서 독보적인 위치를 확고히 하려는 전략적 움직임을 보여줍니다. JSR 패키지 지원은 생태계 확장성을, `dangerouslyAllowAllBuilds`는 보안과 편의성 사이의 균형을 제공하며 pnpm의 다재다능함을 더합니다.

### 한국인 개발자들에게 다음과 같은 권장사항을 제시합니다

* 최신 버전으로의 업그레이드를 적극 고려하십시오: 특히 pnpm 10.12.1 이상 버전은 글로벌 가상 스토어와 개선된 버전 카탈로그 시스템을 통해 개발 생산성을 크게 향상시킬 수 있습니다.
* 글로벌 가상 스토어를 활성화하여 성능을 체감하십시오: 로컬 개발 환경에서 `enableGlobalVirtualStore: true` 설정을 통해 거의 즉각적인 설치 속도를 경험해 보십시오.
* 모노레포 프로젝트에 버전 카탈로그를 도입하십시오: `pnpm-workspace.yaml`의 카탈로그 기능을 활용하여 의존성 버전을 중앙에서 관리하고, `catalogMode` 설정을 통해 팀의 버전 관리 정책을 강제하십시오.
* JSR 패키지 활용을 검토하십시오: JSR 생태계의 새로운 패키지를 프로젝트에 통합할 기회를 탐색해 보십시오.
* CI/CD 파이프라인을 검토하고 업데이트하십시오: 사이드 이펙트 캐시 키 변경으로 인해 첫 CI 빌드 시 캐시 미스가 발생할 수 있으므로, 캐시 전략을 검토하고 필요하다면 캐시를 재생성하는 것을 고려하십시오.
* `dangerouslyAllowAllBuilds` 사용에 신중하십시오: 이 설정은 편의성을 제공하지만, 보안 위험을 내포하므로 신뢰할 수 있는 환경에서만 사용하고 그 영향을 충분히 이해해야 합니다.

pnpm은 지속적으로 진화하며 개발자에게 더 효율적이고 안정적인 의존성 관리 솔루션을 제공하고 있습니다.
