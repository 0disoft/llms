# MongoDB 2025년 1분기 주요 업데이트 분석

## I. 서론: 2025년 1분기 MongoDB 생태계 기술 동향 요약

2025년 1분기 동안 발표된 MongoDB 생태계의 업데이트는 보안 강화, 고급 기능의 안정화, 개발자 경험의 현대화라는 세 가지 뚜렷한 방향성을 제시합니다. 이는 MongoDB가 혁신적인 기능들을 시장에 선보이는 단계를 지나, 실제 프로덕션 환경에서의 안정성과 신뢰성을 공고히 하는 성숙 단계로 진입하고 있음을 보여줍니다.

첫째, 보안 강화는 이번 분기 업데이트의 가장 중요한 화두였습니다. MongoDB Atlas는 보안 위협에 취약한 SMS 기반 다중 인증(MFA) 지원을 중단하고, Authenticator App(TOTP)과 같은 더 강력한 인증 방식으로의 전환을 유도하고 있습니다. 또한, 커맨드 라인 인터페이스인 `mongosh` 역시 발견된 보안 취약점(CVE)을 해결하기 위한 긴급 패치를 배포했습니다.

둘째, 고급 기능의 안정화가 두드러집니다. 특히 MongoDB 8.0 버전을 중심으로 Change Streams, Time-Series, Sharding과 같은 MongoDB의 핵심 차별화 기능들에서 발견되었던 복잡한 엣지 케이스(edge case) 버그들이 대거 수정되었습니다. 이는 해당 기능들이 '프로덕션 레디(production-ready)' 상태를 더욱 공고히 하려는 단계에 이르렀음을 의미합니다.

마지막으로, 개발자 경험의 현대화를 위한 노력이 지속되고 있습니다. `mongosh`에는 샤딩 관리를 현대화하는 `sh.moveRange`와 같은 새로운 헬퍼(helper) 메서드가 추가되었고, MongoDB Atlas에는 CI/CD 파이프라인과의 연동을 용이하게 하는 서비스 계정(Service Accounts) 기능이 도입되었습니다.

---

## II. MongoDB 서버: 버전별 핵심 변경사항 심층 분석

2025년 1분기 동안 MongoDB는 안정성과 보안을 강화하기 위해 주요 안정(Stable) 릴리즈 버전에 대한 패치를 꾸준히 배포했습니다.

아래 표는 2025년 1분기에 릴리즈된 주요 서버 버전의 핵심 변경 사항을 요약한 것입니다.

| 버전 | 릴리즈 날짜 | 개발자를 위한 핵심 요약 |
|---|---|---|
| 8.0.6 | 2025년 3월 19일 | macOS 14 (Sonoma) 공식 지원 및 `_id: { $in: }` 쿼리 성능 개선 |
| 8.0.5 | 2025년 2월 20일 | Change Stream의 'drop' 이벤트 오발생 및 고유 복합 인덱스 스캔 오류 등 치명적 버그 수정 |
| 6.0.21 | 2025년 3월 17일 | `fromjson` 최대 깊이 제한 변경으로 잠재적 보안 위협 방지 및 FCV 다운그레이드 안정성 강화 |
| 6.0.20 | 2025년 1월 15일 | SSL/TLS 연결 시 전체 인증서 체인 검증을 통한 보안 강화 |
| 5.0.31 | 2025년 1월 28일 | 리샤딩 중 재시도 가능 쓰기(Retryable Writes)의 이중 실행 버그 수정으로 데이터 정합성 확보 |

### A. MongoDB 8.0.x (8.0.5, 8.0.6) 릴리즈 분석

MongoDB 8.0은 최신 안정 릴리즈로서, 이번 분기에는 특히 Change Streams, Sharding, Time-Series와 같은 고급 기능의 안정성을 높이는 데 중점을 둔 중요한 패치들이 배포되었습니다.

* 8.0.5 (2025년 2월 20일 릴리즈)
  * `SERVER-97044`: Change Stream의 'drop' 이벤트 오발생 버그 수정.
    * 이 수정은 존 샤딩(zone sharding)을 사용하는 컬렉션에 대해 리샤딩(resharding)이나 언샤딩(unsharding) 작업 시, 실제 컬렉션이 삭제되지 않았음에도 Change Stream이 'drop' 이벤트를 잘못 발생시키는 심각한 버그를 해결합니다. 이벤트 기반 마이크로서비스 아키텍처에서 치명적인 데이터 불일치를 유발할 수 있으므로, 샤딩된 클러스터에서 Change Stream을 사용하는 모든 개발자는 반드시 8.0.5 이상으로 업그레이드해야 합니다.
  * `SERVER-97860`: 고유 복합 인덱스 스캔 시 부정확한 결과 반환 버그 수정.
    * 여러 필드를 조합하는 고유 복합 인덱스를 스캔할 때 잘못된 결과를 반환하여 데이터 정합성을 깨뜨릴 수 있는 문제를 해결합니다. 해당 인덱싱 전략을 사용하는 개발자는 이 패치가 적용된 버전으로 업그레이드해야 합니다.
  * `SERVER-99290`, `SERVER-99345`: Time-Series 컬렉션 안정성 강화.
    * 비정상적인 타임시리즈 버킷 데이터로 인한 FCV(Feature Compatibility Version) 8.0 업그레이드 실패 문제와 내부 버킷 컬렉션의 부적절한 샤딩/이동 시도를 방지하는 로직을 추가했습니다.
* 8.0.6 (2025년 3월 19일 릴리즈)
  * `SERVER-87442`: macOS 14 (Sonoma) 지원 추가.
    * Apple Silicon (ARM64) 및 Intel (AMD64) 기반의 최신 macOS인 Sonoma를 공식적으로 지원합니다.
  * `SERVER-97911`: `_id: { $in: }` 쿼리 성능 개선.
    * `_id` 필드에 대한 `_id: { $in: [] }` 쿼리 실행 시 불필요하게 전체 컬렉션을 스캔하던 비효율을 제거하여, 빈 배열에 대한 `$in` 쿼리가 즉시 빈 결과를 반환하도록 수정했습니다.

### B. MongoDB 6.0.x (6.0.20, 6.0.21) 릴리즈 분석

MongoDB 6.0은 여전히 많은 프로덕션 환경에서 활발하게 사용되는 버전으로, 이번 분기에는 보안과 안정성을 강화하는 중요한 패치들이 포함되었습니다.

* 6.0.20 (2025년 1월 15일 릴리즈)
  * `SERVER-95445`: SSL 인증서 체인 검증 강화.
    * TLS/SSL을 사용하여 MongoDB에 안전하게 연결할 때, 리프(leaf) 인증서뿐만 아니라 중간 인증 기관(Intermediate CA)을 포함한 전체 인증서 체인을 CRL(Certificate Revocation List)과 대조하여 검증하도록 로직이 강화되었습니다. 이는 '중간자 공격(Man-in-the-middle attack)'과 같은 보안 위협에 대한 방어 능력을 크게 향상시킵니다.
  * `SERVER-94635`: 세션 새로고침 매개변수 구성 가능.
    * MongoDB 드라이버가 서버와의 논리적 세션을 유지하기 위해 주기적으로 통신하는 내부 타이밍 매개변수들을 사용자가 직접 조정할 수 있도록 허용합니다.
* 6.0.21 (2025년 3월 17일 릴리즈)
  * `SERVER-100594`: `fromjson` 최대 깊이 250에서 200으로 하향 조정.
    * `fromjson` 함수의 재귀 호출 최대 깊이를 하향 조정하여 악의적인 사용자가 비정상적으로 깊게 중첩된 문서를 전송하여 서버의 스택 메모리를 고갈시키는 스택 오버플로우(stack overflow) 공격을 방지합니다.
  * `SERVER-94405`: FCV 5.0 다운그레이드 시 세션 컬렉션 자동 분할 재활성화.
    * FCV(Feature Compatibility Version) 6.0에서 5.0으로 다운그레이드할 때, `config.sessions` 컬렉션의 자동 분할(auto-splitting) 기능이 다시 활성화되지 않던 버그를 수정하여 롤백 시나리오의 안정성을 향상시킵니다.

### C. MongoDB 5.0.x (5.0.31) 릴리즈 분석 (2025년 1월 28일 릴리즈)

MongoDB 5.0은 여전히 많은 레거시 시스템에서 사용되고 있으며, 이번 분기에는 샤딩된 클러스터와 복제본 세트의 데이터 정합성과 관련된 매우 중요한 버그들이 수정되었습니다.

* `SERVER-89529`: 리샤딩 중 재시도 가능 쓰기(Retryable Writes)의 이중 실행 버그 수정.
  * 리샤딩 작업 후 청크 마이그레이션이 이어지는 특정 시나리오에서 재시도 가능 쓰기 로직이 오작동하여 쓰기 작업이 두 번 이상 실행될 수 있는 심각한 버그를 해결합니다. 금융 거래 처리 시스템과 같이 데이터 정합성이 매우 중요한 경우 필수적인 업데이트입니다.
* `SERVER-86674`: Primary의 따라잡기(Catch-up) 로직 오류 수정.
  * 복제본 세트에서 새로운 Primary 노드가 선출될 때, 아직 모든 데이터를 따라잡지 못했음에도 동기화가 완료되었다고 잘못 판단하던 문제를 해결합니다. 이는 복제본 세트의 장애 복구(failover) 과정의 안정성과 데이터 일관성을 크게 향상시킵니다.

---

## III. MongoDB Atlas: 클라우드 플랫폼의 주요 변화와 대응 방안

MongoDB Atlas는 엔터프라이즈급 보안 및 거버넌스 기능을 갖춘 종합 데이터 플랫폼으로 빠르게 진화하고 있습니다. 2025년 1분기 업데이트는 개발자의 계정 보안과 운영 효율성에 직접적인 영향을 미치는 중요한 변경 사항들을 포함합니다.

### A. 긴급: 인증 방식 변경 - SMS MFA 지원 중단 및 대응 가이드

2025년 3월 12일 릴리즈부터 MongoDB Atlas는 보안 강화를 위해 새로운 사용자에 대한 SMS 기반 다중 인증(MFA) 지원을 중단했습니다. 이는 SIM 카드 복제나 탈취를 통한 'SIM 스와핑(SIM swapping)' 공격 우려가 커지고 있기 때문입니다. 기존 SMS 사용자도 더 이상 SMS를 새로운 MFA 수단으로 등록할 수 없습니다.

이 변경 사항은 모든 Atlas 사용자에게 직접적인 영향을 미치며, 특히 SMS를 유일한 MFA 수단으로 사용하는 개발자는 계정 잠김(lock-out) 위험에 처하게 됩니다. 즉각적인 조치가 필요합니다.

* 권장 조치 및 전환 가이드:
  * 즉시 다른 MFA 수단으로 전환: 계정 잠김을 방지하기 위해 가능한 한 빨리 더 안전한 MFA 수단으로 전환해야 합니다. Atlas가 권장하는 대안은 다음과 같습니다:
    * Authenticator App (TOTP): Google Authenticator, Microsoft Authenticator, Authy 등 시간 기반 일회용 비밀번호(Time-based One-Time Password)를 생성하는 모바일 앱.
    * Security Key / Biometrics: YubiKey와 같은 FIDO2 호환 하드웨어 키 또는 Windows Hello, macOS Touch ID와 같은 생체 인증.
    * Okta Verify Mobile App: Push 알림을 통한 간편한 인증을 지원합니다.
  * Authenticator App (TOTP) 설정 단계:
        1. MongoDB Atlas에 로그인 후, 사용자 이름 클릭 -> Manage your MongoDB Account 선택.
        2. 계정 관리 페이지 왼쪽 메뉴에서 Security 클릭.
        3. Multi-Factor Authentication 섹션에서 Authenticator App 옆의 Set up 버튼 클릭.
        4. 화면의 QR 코드를 모바일 앱으로 스캔 후, 앱에 생성된 6자리 인증 코드를 Atlas 화면에 입력하여 연동 완료.
  * 백업 수단 설정: 하나의 MFA 수단에만 의존하는 것은 위험합니다. 최소 2개 이상의 MFA 수단을 설정하는 것이 강력히 권장됩니다.

### B. 개발 및 운영 효율성 증대를 위한 신규 기능

이번 분기에는 개발자와 운영팀의 효율성을 높이고, 엔터프라이즈 환경의 요구 사항을 충족시키는 중요한 기능들이 추가되었습니다.

* 서비스 계정(Service Accounts) 도입:
  * 이전에는 애플리케이션이나 CI/CD 파이프라인이 Atlas API에 접근하기 위해 특정 사용자에게 발급된 API 키를 사용했습니다. 2025년 4월 2일 릴리즈(Q1의 주요 흐름을 잇는 중요한 업데이트)에서 도입된 서비스 계정은 이러한 문제를 해결합니다.
  * 서비스 계정은 특정 사용자가 아닌 조직에 귀속되는 독립적인 서비스 주체(service principal)입니다. 이를 통해 애플리케이션이나 스크립트별로 독립적인 계정을 생성하고, 필요한 최소한의 권한만 부여하며, 독립적인 생명주기를 관리할 수 있습니다. 개발팀은 기존 사용자 기반 API 키를 점진적으로 서비스 계정 방식으로 전환하는 계획을 수립해야 합니다.
* `autoCompact` 권한 작업 추가:
  * MongoDB에서 문서의 삭제나 업데이트가 빈번하게 발생하면 단편화(fragmentation)가 발생하여 스토리지 비용을 유발하고 쿼리 성능을 저하시킬 수 있습니다. `autoCompact`는 이러한 단편화된 공간을 자동으로 회수하여 스토리지를 최적화하는 기능입니다.
  * 이번 업데이트를 통해 MongoDB 8.0 이상을 실행하는 Atlas 전용 클러스터에서 `atlasAdmin` 역할을 가진 데이터베이스 사용자가 이 백그라운드 자동 압축 기능을 활성화할 수 있는 권한이 추가되었습니다.

---

## IV. 개발자 도구 업데이트: `mongosh` 및 Relational Migrator

개발자의 생산성에 직접적인 영향을 미치는 커맨드 라인 도구와 마이그레이션 유틸리티에도 중요한 업데이트가 있었습니다.

### A. MongoDB Shell (`mongosh`)

`mongosh`는 MongoDB와 상호작용하는 핵심 도구이므로, 모든 개발자는 최신 버전을 유지하는 것이 매우 중요합니다.

* v2.3.9 (2025년 2월 5일 릴리즈): 중요 보안 업데이트
  * 여러 보안 취약점(`CVE-2025-1691`, `CVE-2025-1692`, `CVE-2025-1693`)을 해결하기 위해 사용자 입력에 대한 유효성 검사가 강화되었습니다.
  * 기반이 되는 Node.js 버전을 20.18.2로 업그레이드하여 Node.js 자체의 보안 문제도 함께 해결했습니다. 모든 개발자는 잠재적인 위협으로부터 개발 환경을 보호하기 위해 즉시 `mongosh`를 최신 버전으로 업그레이드해야 합니다.
* v2.4.2 (2025년 3월 6일 릴리즈): `sh.moveRange` 헬퍼 메서드 추가
  * 샤딩 클러스터에서 데이터 범위를 수동으로 이동시키는 새로운 헬퍼 메서드인 `sh.moveRange()`가 추가되었습니다. 이는 MongoDB 6.0부터 도입된 `moveRange` 명령어를 셸에서 더 쉽게 사용할 수 있도록 지원합니다.
  * 이 변화는 MongoDB의 샤딩 관리 철학이 과거의 물리적인 '청크(chunk)' 단위에서 논리적인 '데이터 범위(range)' 단위로 전환되고 있음을 보여줍니다. `sh.moveChunk()` 대신 현대적인 `sh.moveRange()`를 사용하는 것이 권장됩니다.

### B. Relational Migrator

MongoDB Relational Migrator는 관계형 데이터베이스(RDBMS)에서 MongoDB로의 마이그레이션을 지원하는 도구입니다. 이번 분기 업데이트는 지원하는 소스 데이터베이스를 확장하고 편의 기능을 개선하는 데 초점을 맞췄습니다.

* v1.12.0 (2025년 2월 3일 릴리즈)
  * JDBC 연결을 통해 다음 4개의 새로운 데이터베이스로부터의 마이그레이션을 지원하게 되었습니다 (현재 공개 프리뷰 상태): YugabyteDB, CockroachDB, SAP Sybase IQ (SAP IQ), SAP SQL Anywhere.
  * 특히 클라우드 네이티브 환경에서 많이 사용되는 분산 SQL 데이터베이스인 YugabyteDB와 CockroachDB의 지원이 추가된 점이 주목할 만합니다.
  * 마이그레이션 대상이 되는 MongoDB 클러스터에 연결할 때, 보안이 강화된 X.509 인증서 기반 인증을 지원하게 되었습니다.

---

## V. 종합 분석 및 개발자 권장 조치 사항

2025년 1분기 MongoDB 업데이트는 전반적으로 시스템의 안정성과 보안을 한 단계 끌어올리는 데 집중되었습니다. 개발자는 이러한 변화를 수동적으로 받아들이는 것을 넘어, 자신의 역할과 사용 환경에 맞춰 능동적으로 대응해야 합니다.

### 개발자 역할 및 사용 환경별 권장 조치 체크리스트

| 대상 | 권장 조치 | 중요도 | 관련 섹션 |
|---|---|---|---|
| 모든 Atlas 사용자 | SMS MFA를 사용 중이라면 즉시 Authenticator App (TOTP) 등 다른 수단으로 변경하고, 반드시 2개 이상의 백업 수단을 설정합니다. | 긴급 | III-A |
| 모든 개발자 | `mongosh`를 최신 버전(v2.5.2 이상 권장)으로 즉시 업그레이드하여 알려진 보안 취약점(CVE)을 해결합니다. | 긴급 | IV-A |
| Change Stream + Sharding 사용자 (MongoDB 8.0) | 데이터 불일치를 유발하는 `SERVER-97044` 버그를 해결하기 위해 서버를 8.0.5 이상으로 업그레이드할 것을 강력히 권장합니다. | 높음 | II-A |
| 복합 고유 인덱스 사용자 (MongoDB 8.0) | 데이터 정합성 문제(`SERVER-97860`)를 방지하기 위해 서버를 8.0.5 이상으로 업그레이드합니다. | 높음 | II-A |
| 샤딩 클러스터 사용자 (MongoDB 5.0) | 재시도 가능 쓰기의 이중 실행 버그(`SERVER-89529`)로 인한 데이터 손상을 막기 위해 서버를 5.0.31 이상으로 업그레이드합니다. | 높음 | II-C |
| CI/CD 및 자동화 담당자 (Atlas) | 장기적인 관점에서 사용자 기반 API 키를 조직에 귀속되는 서비스 계정으로 전환하는 계획을 수립합니다. | 보통 | III-B |
| 샤딩 클러스터 운영자 | 데이터 범위 이동 시, 레거시 `sh.moveChunk` 대신 현대적인 `sh.moveRange`를 사용하도록 운영 스크립트 및 내부 가이드를 업데이트합니다. | 보통 | IV-A |
| TLS/SSL 연결 사용자 (MongoDB 6.0) | 강화된 인증서 체인 검증(`SERVER-95445`)의 이점을 누리기 위해 6.0.20 이상으로 업그레이드를 고려합니다. | 보통 | II-B |

### 우선순위별 권장 조치 요약

분석된 모든 내용을 종합하여, 개발자가 즉시 실행에 옮겨야 할 조치들을 중요도에 따라 다음과 같이 요약합니다.

* 긴급 (Immediate Action Required): 이 조치들은 계정 보안 및 개발 환경 보호와 직결되므로 지체 없이 수행해야 합니다.
  * Atlas MFA 전환: 현재 Atlas에서 SMS를 MFA 수단으로 사용하고 있다면, 계정 잠김 위험을 피하기 위해 즉시 Authenticator App(TOTP)이나 Security Key와 같은 안전한 방식으로 전환하고, 반드시 백업 수단을 추가로 설정해야 합니다.
  * `mongosh` 보안 업데이트: 모든 개발자는 알려진 보안 취약점으로부터 개발 환경을 보호하기 위해 로컬에 설치된 `mongosh`를 즉시 최신 버전으로 업그레이드해야 합니다.
* 높음 (High Priority - Proactive Upgrade Recommended): 이 조치들은 애플리케이션의 데이터 무결성 및 정합성과 직접적으로 관련이 있으므로, 다음 유지보수 기간에 최우선적으로 서버 업그레이드를 계획해야 합니다.
  * MongoDB 8.0 사용자: 샤딩 환경에서 Change Stream을 사용하거나, 여러 필드로 구성된 고유 인덱스를 사용하는 경우, 데이터 불일치와 부정확한 결과를 유발할 수 있는 심각한 버그가 8.0.5 버전에서 수정되었습니다. 해당 기능을 사용한다면 업그레이드가 필수적입니다.
  * MongoDB 5.0 사용자: 샤딩 클러스터에서 재시도 가능 쓰기(Retryable Writes)가 두 번 실행될 수 있는 치명적인 데이터 정합성 버그가 5.0.31 버전에서 해결되었습니다. 샤딩 환경을 운영 중이라면 반드시 패치를 적용해야 합니다.
* 보통 (Medium Priority - Review and Plan): 이 조치들은 즉각적인 장애를 유발하지는 않지만, 장기적인 운영 효율성, 보안, 비용 최적화를 위해 검토하고 계획에 반영해야 합니다.
  * Atlas API 키 관리: CI/CD 파이프라인 등 자동화된 프로세스에서 사용하는 API 키를 새로운 서비스 계정 방식으로 전환하는 것을 장기적인 목표로 설정하면, 인력 변동에 따른 운영 리스크를 크게 줄일 수 있습니다.
  * 샤딩 관리 방식 현대화: 샤딩 클러스터의 데이터 분포를 수동으로 조정할 필요가 있을 때, 이제는 `sh.moveRange`를 사용하는 것이 모범 사례입니다. 관련 내부 문서나 스크립트가 있다면 지금 업데이트해두는 것이 좋습니다.
  * 기타 안정성 패치 검토: 자신이 사용하는 MongoDB 버전(예: 6.0)의 릴리즈 노트를 검토하여, `fromjson` 최대 깊이 변경과 같은 미묘하지만 중요한 변화가 자신의 애플리케이션에 미칠 영향을 사전에 파악하고 대비하는 것이 좋습니다.
